# 需求文档

## 介绍

CCCS（Claude Code Configuration Switcher）是一个基于Tauri、Vite、TypeScript和Rust技术栈开发的跨平台桌面应用程序。该应用程序帮助用户方便快捷地切换Claude Code的配置文件，通过系统托盘图标提供配置文件管理功能。

## 需求

### 需求 1：应用启动时检测Claude Code安装

**用户故事：** 作为用户，我希望应用启动时能自动检测Claude Code的安装状态，以便确保应用能正常工作

#### 验收标准

1. 当应用启动时，系统应该检查当前用户主目录下是否存在".claude"目录
2. 如果".claude"目录不存在，系统应该询问用户是否未安装Claude Code
3. 如果用户确认未安装，系统应该提供文件选择器让用户选择Claude Code安装目录
4. 如果用户选择退出，系统应该正常关闭应用程序

### 需求 2：配置文件验证

**用户故事：** 作为用户，我希望应用能验证Claude Code配置文件的存在，以确保配置切换功能可用

#### 验收标准

1. 当".claude"目录存在时，系统应该检查该目录下是否存在settings.json文件
2. 如果settings.json文件不存在，系统应该提示用户至少先运行一次Claude Code
3. 如果settings.json文件不存在，系统应该直接退出程序
4. 系统应该扫描目录中所有带"profilename."前缀的settings.json文件

### 需求 3：系统托盘集成

**用户故事：** 作为用户，我希望应用能最小化到系统托盘，以便不占用桌面空间但仍可快速访问

#### 验收标准

1. 当配置文件验证通过后，应用应该自动最小化到系统托盘
2. 系统托盘中应该显示应用图标
3. 右键点击托盘图标时，应该弹出上下文菜单
4. 应用应该在系统托盘中保持运行状态

### 需求 4：配置文件菜单显示

**用户故事：** 作为用户，我希望能在托盘菜单中看到所有可用的配置文件，以便选择要切换到的配置

#### 验收标准

1. 托盘菜单应该显示所有检测到的profile配置文件
2. 菜单应该包含分割线分隔不同类型的菜单项
3. 菜单应该包含"设置"选项
4. 菜单应该包含"退出"选项
5. 菜单项应该按逻辑顺序排列（profiles、分割线、设置、退出）

### 需求 5：配置文件状态检测

**用户故事：** 作为用户，我希望能看到哪个配置文件当前处于活动状态，以便了解当前使用的配置

#### 验收标准

1. 系统应该定时检查默认settings.json与各profile配置的内容一致性
2. 当profile配置与默认settings.json内容一致时，该profile菜单项右侧应该显示绿色对勾（✅）
3. 当profile配置与默认settings.json内容不一致时，该profile菜单项不应该显示任何图标
4. 系统应该支持多个profile同时显示绿色对勾（当它们内容一致时）

### 需求 6：配置文件切换功能

**用户故事：** 作为用户，我希望能点击profile菜单项来切换到该配置，以便快速应用不同的Claude Code设置

#### 验收标准

1. 当点击已激活的profile时（显示绿色对勾），系统不应该执行任何操作
2. 当点击未激活的profile时，系统应该先显示警告图标（❕）
3. 系统应该将选中profile的内容复制到默认settings.json文件
4. 复制完成后，系统应该将该profile的图标更改为绿色对勾（✅）
5. 系统应该更新其他profile的状态图标，移除不再匹配的绿色对勾

### 需求 7：设置页面

**用户故事：** 作为用户，我希望能访问设置页面了解应用信息，以便更好地使用应用

#### 验收标准

1. 点击"设置"菜单项时，系统应该打开设置页面
2. 设置页面上半部分应该显示应用的介绍性文字
3. 设置页面应该包含"关闭"按钮
4. 点击"关闭"按钮时，设置页面应该关闭

### 需求 8：应用退出功能

**用户故事：** 作为用户，我希望能正常退出应用程序，以便完全关闭应用

#### 验收标准

1. 点击"退出"菜单项时，应用程序应该完全关闭
2. 系统托盘图标应该消失
3. 所有应用相关的进程应该正常终止

### 需求 9：多语言支持

**用户故事：** 作为用户，我希望应用能根据我的系统语言显示相应的界面文字，以便更好地理解和使用应用

#### 验收标准

1. 应用应该检测系统当前的UI语言设置
2. 应用应该支持中文和英文界面
3. 当系统语言为中文时，应用界面应该显示中文文字
4. 当系统语言为英文或其他不支持的语言时，应用界面应该默认显示英文文字
5. 所有用户可见的文字都应该支持多语言切换